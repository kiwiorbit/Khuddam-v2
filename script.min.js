document.addEventListener("DOMContentLoaded",function(){initAOS(),initNavbar(),initSmoothScrolling(),initMobileMenu(),initCounterAnimation(),initTestimonialSlider(),initFormHandling(),initHeroAnimation()});function easeInOutCubic(t){return t<.5?4*t*t*t:1-Math.pow(-2*t+2,3)/2}function closeMobileMenu(){const e=document.getElementById("mobile-menu"),t=document.getElementById("menu-toggle");if(e){e.style.opacity="0",setTimeout(()=>{e.style.display="none",e.style.opacity="1"},200),document.body.style.overflow="";if(t){t.style.zIndex="9000";const n=t.querySelector("i");n&&n.classList.contains("fa-xmark")&&(n.classList.remove("fa-xmark"),n.classList.add("fa-ellipsis-vertical"))}}}function initAOS(){AOS.init({duration:1e3,once:!0,offset:100})}function initNavbar(){const e=document.getElementById("navbar"),t=document.getElementById("menu-toggle");e&&(window.addEventListener("scroll",function(){window.scrollY>50?e.classList.add("bg-primary-black","shadow-lg"):e.classList.remove("bg-primary-black","shadow-lg"),t&&(t.style.zIndex="60")}),window.dispatchEvent(new Event("scroll")))}function initSmoothScrolling(){const e=document.querySelectorAll('a[href^="#"]'),t=document.querySelector(".fa-chevron-down")?.closest("a");function n(e,t=1200){if(!e)return;const n=window.scrollY,a=e.getBoundingClientRect().top+window.scrollY-80,i=a-n;let r=null;function o(e){null===r&&(r=e);const a=e-r,s=Math.min(a/t,1),l=easeInOutCubic(s);window.scrollTo(0,n+i*l),a<t&&requestAnimationFrame(o)}requestAnimationFrame(o)}e.forEach(e=>{e.addEventListener("click",function(a){if("#"===this.getAttribute("href"))return;a.preventDefault();const i=this.getAttribute("href"),r=document.querySelector(i);closeMobileMenu(),t&&this===t?n(r,1200):n(r,1e3)})})}function initMobileMenu(){const e=document.getElementById("menu-toggle"),t=document.getElementById("mobile-menu"),n=document.getElementById("close-menu"),a=document.querySelectorAll(".accordion-toggle");if(!e||!t)return;e.style.zIndex="9000",e.addEventListener("click",function(n){n.stopPropagation(),n.preventDefault(),t.style.opacity="0",t.style.display="block",t.style.zIndex="9999",void t.offsetWidth,t.style.opacity="1",document.body.style.overflow="hidden";const a=e.querySelector("i");a&&a.classList.contains("fa-ellipsis-vertical")&&(a.classList.remove("fa-ellipsis-vertical"),a.classList.add("fa-xmark"))}),n&&n.addEventListener("click",function(){closeMobileMenu()}),document.addEventListener("click",function(n){"block"===t.style.display&&!t.contains(n.target)&&n.target!==e&&!e.contains(n.target)&&closeMobileMenu()});const i=document.querySelectorAll('#mobile-menu a[href^="#"]');i.forEach(e=>{e.addEventListener("click",function(){closeMobileMenu()})}),a.forEach(e=>{e.addEventListener("click",function(){const e=this.nextElementSibling,t=this.querySelector("i.fas")||this.querySelector("i.fa-chevron-down"),n=this.querySelector(".icon-container");e.classList.contains("hidden")?(e.classList.remove("hidden"),t&&(t.style.transform="rotate(180deg)"),n&&(n.classList.add("bg-opacity-40"),n.classList.remove("bg-opacity-20"))):(e.classList.add("hidden"),t&&(t.style.transform="rotate(0deg)"),n&&(n.classList.remove("bg-opacity-40"),n.classList.add("bg-opacity-20")))})}),t.querySelectorAll("a:not(.accordion-toggle)").forEach(e=>{e.addEventListener("click",function(){closeMobileMenu()})})}function initHeroAnimation(){const e=document.getElementById("quran-text"),t=document.getElementById("hero-content"),n=document.getElementById("orbit-canvas");if(!e||!t||!n)return;const a=n.getContext("2d");let i=!1,r=null,o=[],s=[],l=0,c=0;const d=1e3;let u=0,m=0;const p=2e3,f=()=>window.innerWidth>=768,g="امس",h="عفل",y="حفر";function v(){n.width=window.innerWidth,n.height=window.innerHeight,function(){s=[];const e=Math.floor(n.width*n.height/2e3);for(let t=0;t<e;t++)s.push({x:Math.random()*n.width,y:Math.random()*n.height,radius:2*Math.random()+.7,opacity:.3*Math.random()+.2,twinkleSpeed:.05*Math.random()+.01,twinkleFactor:0,color:Math.random()>.7?"#deae35":"#FFFFFF"})}()}function b(){o=[];const e=Math.min(window.innerWidth,window.innerHeight)*.25,t=[{color:"#e29468",name:"Mercury",speed:.3072},{color:"#e7cdcd",name:"Venus",speed:.224},{color:"#3d9c4b",name:"Earth",speed:.192},{color:"#c1440e",name:"Mars",speed:.1536},{color:"#e0ae6f",name:"Jupiter",speed:.0832},{color:"#d6b56b",name:"Saturn",speed:.0576},{color:"#b5e3e3",name:"Uranus",speed:.0384},{color:"#5b5ddf",name:"Neptune",speed:.032}],n=[{chars:g,radius:.5*e},{chars:h,radius:.75*e},{chars:y,radius:1*e}];n.forEach(e=>{for(let a=0;a<e.chars.length;a++){const i=a/e.chars.length*Math.PI*2,r=e.chars.charAt(a),s=e.radius,l=(n.indexOf(e)*e.chars.length+a)%t.length,c=t[l];o.push({char:r,angle:i,radius:s,speed:c.speed,planetName:c.name,size:14.4,opacity:1,ringType:n.indexOf(e),planetSize:16,planetColor:c.color})}})}function w(){a.clearRect(0,0,n.width,n.height),u>0&&(a.save(),s.forEach(e=>{e.twinkleFactor+=e.twinkleSpeed;const t=.5*Math.sin(e.twinkleFactor)+.5;a.beginPath(),a.arc(e.x,e.y,e.radius,0,2*Math.PI),a.fillStyle=e.color;const n=.6;a.globalAlpha=e.opacity*t*u*n,a.fill()}),a.restore(),u<1&&m>0&&(u=Math.min((Date.now()-m)/p,1)));const e=Math.min(window.innerWidth,window.innerHeight)*.25,t=[.5*e,.75*e,1*e],i=.5,r=3;l>0&&(t.forEach(e=>{a.beginPath(),a.strokeStyle="#FFFFFF",a.setLineDash([5,10]),a.lineWidth=2,a.globalAlpha=.15*l,a.beginPath();for(let t=0;t<2*Math.PI;t+=.01){const o=Math.cos(t)*e*r,s=Math.sin(t)*e,l=o*Math.cos(-i)-s*Math.sin(-i),c=o*Math.sin(-i)+s*Math.cos(-i),d=n.width/2+l,u=n.height/2+c;0===t?a.moveTo(d,u):a.lineTo(d,u)}a.closePath(),a.stroke()}),l<1&&c>0&&(l=Math.min((Date.now()-c)/d,1))),a.setLineDash([]),a.textAlign="center",a.textBaseline="middle",o.forEach(e=>{e.angle-=.01*e.speed;const t=Math.cos(e.angle)*e.radius*r,o=Math.sin(e.angle)*e.radius,s=t*Math.cos(-i)-o*Math.sin(-i),l=t*Math.sin(-i)+o*Math.cos(-i),c=n.width/2+s,d=n.height/2+l;if(a.globalAlpha=e.opacity,a.strokeStyle="#deae35",a.lineWidth=1.2,a.beginPath(),a.arc(c,d,e.planetSize,0,2*Math.PI),a.stroke(),a.fillStyle=e.planetColor||"#deae35",a.beginPath(),a.arc(c,d,e.planetSize,0,2*Math.PI),a.fill(),"Earth"===e.planetName&&(a.beginPath(),a.arc(c+.3*e.planetSize,d-.1*e.planetSize,.5*e.planetSize,0,.8*Math.PI),a.fillStyle="#4f97dd",a.fill(),a.beginPath(),a.arc(c-.4*e.planetSize,d+.3*e.planetSize,.4*e.planetSize,0,1.2*Math.PI),a.fillStyle="#4f97dd",a.fill()),"Saturn"===e.planetName&&(a.beginPath(),a.ellipse(c,d,1.8*e.planetSize,.5*e.planetSize,Math.PI/6,0,2*Math.PI),a.strokeStyle="#e0ae6f",a.lineWidth=2.4,a.stroke(),a.beginPath(),a.arc(c,d,e.planetSize,0,2*Math.PI),a.fillStyle="#d6b56b",a.fill()),a.beginPath(),a.arc(c-.3*e.planetSize,d-.3*e.planetSize,.4*e.planetSize,0,2*Math.PI),a.fillStyle="rgba(255, 255, 255, 0.2)",a.fill(),a.fillStyle="#000000",a.font=`bold ${e.size}px Amiri`,a.shadowColor="rgba(255, 255, 255, 0.7)",a.shadowBlur=3,a.fillText(e.char,c,d),a.fillText(e.char,c,d),a.shadowColor="transparent",a.shadowBlur=0)})}function M(){w(),r=requestAnimationFrame(M)}n.style.opacity="0",f()&&(v(),b(),t.addEventListener("mouseenter",function(){i||(e.classList.add("glow"),n.style.opacity="1",r&&(cancelAnimationFrame(r),r=null),M(),i=!0,u=.01,m=Date.now(),setTimeout(function(){l=.01,c=Date.now()},1e3))}),t.addEventListener("mouseleave",function(){i&&(n.style.opacity="0",e.classList.remove("glow"),setTimeout(function(){r&&(cancelAnimationFrame(r),r=null),i=!1,l=0,u=0},500))})),window.addEventListener("resize",function(){f()?(n.style.display="block",v(),b(),i&&(r&&(cancelAnimationFrame(r),r=null),M())):(n.style.display="none",e.classList.remove("glow"),r&&(cancelAnimationFrame(r),r=null),i=!1)})}function initCounterAnimation(){const e=[{id:"families-counter",target:5e3},{id:"students-counter",target:12e3},{id:"graduates-counter",target:3500},{id:"countries-counter",target:45}];function t(e,t){let n=0;const a=Math.ceil(t/100),i=2e3,r=Math.floor(i/(t/a)),o=setInterval(()=>{(n+=a)>=t?(e.textContent=t.toLocaleString(),clearInterval(o)):e.textContent=n.toLocaleString()},r)}const n=new IntersectionObserver(n=>{n.forEach(n=>{if(n.isIntersecting){const a=e.find(e=>e.id===n.target.id);a&&(t(n.target,a.target),this.unobserve(n.target))}})},{threshold:.5});e.forEach(e=>{const t=document.getElementById(e.id);t&&n.observe(t)})}function initTestimonialSlider(){const e=document.querySelectorAll(".testimonial-slide"),t=document.getElementById("prev-testimonial"),n=document.getElementById("next-testimonial"),a=document.querySelectorAll(".flex.justify-center.mt-8.space-x-2 button");let i=0,r=null;if(0===e.length)return;function o(t){e.forEach(e=>{e.classList.add("hidden")}),e[t].classList.remove("hidden"),a.forEach((e,n)=>{n===t?(e.classList.remove("bg-gray-300"),e.classList.add("bg-primary-gold")):(e.classList.remove("bg-primary-gold"),e.classList.add("bg-gray-300"))})}function s(){r=setInterval(()=>{i=(i+1)%e.length,o(i)},5e3)}function l(){r&&clearInterval(r),s()}o(i),n&&n.addEventListener("click",()=>{i=(i+1)%e.length,o(i),l()}),t&&t.addEventListener("click",()=>{i=(i-1+e.length)%e.length,o(i),l()}),a.forEach((e,t)=>{e.addEventListener("click",()=>{i=t,o(i),l()})}),s()}function initFormHandling(){const e=document.getElementById("contact-form");e&&e.addEventListener("submit",function(t){t.preventDefault(),alert("Thank you for your message! We will get back to you soon."),e.reset()})}
